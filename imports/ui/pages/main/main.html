<head>
    <title>smart_trains</title>
</head>

<body class="main">
<div class="background"></div>
<div class="ui container page">
    <h1 class="ui top attached header">
        Metro Operation Centre
    </h1>
    {{> trainDashboard}}
</div>
</body>

<template name="trainDashboard">
    <div class="train-dashboard ui styled accordion fluid">
        {{#each train in trains}}
            {{> trainItem train}}
        {{/each}}
    </div>
</template>

<template name="trainItem">
    <div class="title">
        <i class="dropdown icon"></i>
        {{this.name}}
    </div>

    <div class="content">
        <p class="transition visible">
            {{this.name}} with registration ID {{this.sfid}}
        </p>

        {{> lcuItem lcuStatus}}

        <div class="carriages">
            {{#each carriage in carriages}}
                {{> carriageItem carriage=carriage isActive=(isActive carriage)}}
            {{/each}}
        </div>
        {{#if activeCarriageId}}
            <div class="ui divider"></div>
            {{> carriageStatus sfid=activeCarriageId}}
        {{/if}}
    </div>
</template>

<template name="lcuItem">
    <div class="ui segment">
        IP: {{this.ip__c}} at SSID: {{this.ssid__c}}
    </div>
</template>

<template name="carriageItem">
    <div class="carriage {{backgroundClass}}">
        <div class="{{carriageImage}}" alt="Carriage illustration"></div>
        <div class="caption">
            <span class="text">{{this.carriage.name}}</span>
            <i class="status icon signal"></i>
        </div>
    </div>
</template>

<template name="carriageStatus">
    <div class="ui grid">
        <div class="twelve wide column">
            {{> irCells sfid=this.sfid}}
        </div>
        <div class="four wide column">
            <div class="ui list">
                <a class="item">
                    <i class="train icon"></i>
                    <div class="content">
                        <div class="header">Congestion</div>
                        <div class="description">No</div>
                    </div>
                </a>
                <a class="item">
                    <i class="fire icon"></i>
                    <div class="content">
                        <div class="header">Temperature</div>
                        <div class="description">-273</div>
                    </div>
                </a>
                <a class="item">
                    <i class="tint icon"></i>
                    <div class="content">
                        <div class="header">Humidity</div>
                        <div class="description">0%</div>
                    </div>
                </a>
                <div class="item">
                    <i class="move icon"></i>
                    <div class="content">
                        <div class="header">Vibration</div>
                        <div class="description">No</div>
                        <div class="list">
                            <a class="item">
                                <i class="arrows-h icon"></i>
                                <div class="content">
                                    <div class="header">Acceleration X</div>
                                    <div class="description">0</div>
                                </div>
                            </a>
                            <a class="item">
                                <i class="arrows-v icon"></i>
                                <div class="content">
                                    <div class="header">Acceleration Y</div>
                                    <div class="description">0</div>
                                </div>
                            </a>
                            <a class="item">
                                <i class="arrow-circle-o-up icon"></i>
                                <div class="content">
                                    <div class="header">Acceleration Z</div>
                                    <div class="description">0</div>
                                </div>
                            </a>
                            <a class="item">
                                <i class="redo icon"></i>
                                <div class="content">
                                    <div class="header">Gyro X</div>
                                    <div class="description">0</div>
                                </div>
                            </a>
                            <a class="item">
                                <i class="repeat icon"></i>
                                <div class="content">
                                    <div class="header">Gyro Y</div>
                                    <div class="description">0</div>
                                </div>
                            </a>
                            <a class="item">
                                <i class="circle-o-notch icon"></i>
                                <div class="content">
                                    <div class="header">Gyro Z</div>
                                    <div class="description">0</div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>